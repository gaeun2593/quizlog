<!DOCTYPE html>
<html lang="en">
<head th:replace="fragments/head :: commonHead">
    <meta charset="UTF-8">
    <title>InquiryPage</title>
</head>
<body>
<div th:replace="fragments/header :: header"></div>
<div class="main-page-container">
    <div th:replace="fragments/aside :: asideFragment" ></div>
    <div class="page-layout">
<form id="inquiryForm" th:action="@{'/support/update/' + ${inquiry.id}}" method="post" th:object="${inquiry}">
    <input type="hidden" name="_method" value="patch" />
    <div class="card mb-4">
    <div class="card-header text-success fs-4 fw-bold">
        <span>ë¬¸ì˜ ë‚´ìš©</span>
        <button th:if="${answer == null}" type="button" id="editButton" class="btn btn-sm btn-outline-warning" onclick="toggleEdit()">âœï¸ ìˆ˜ì •í•˜ê¸°</button>

    </div>
    <div class="card-body">
    <div class="mb-3">
        <label class="form-label fw-bold">ì œëª©</label>
        <input type="text" th:field="*{title}" class="form-control" readonly />
    </div>

    <div class="mb-3">
        <label class="form-label fw-bold">ë‚´ìš©</label>
        <textarea th:field="*{content}" class="form-control" rows="10" readonly></textarea>
    </div>
    </div>
    </div>

   <!-- <div class="text-end d-flex justify-content-end gap-2">
        <button type="button" id="editBtn" class="btn btn-warning" onclick="enableEdit()">âœï¸ ìˆ˜ì •í•˜ê¸°</button>
    </div>-->
</form>
        <form th:action="@{/support/{inquiryId}/delete(inquiryId=${inquiry.id})}" method="post"
              onsubmit="return confirm('ì •ë§ë¡œ ì´ ë¬¸ì˜ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">
            <input type="hidden" name="_method" value="patch" />
            <button type="submit" th:if="${answer == null}" class="btn btn-outline-danger">ğŸ—‘ï¸ ë¬¸ì˜ ì‚­ì œ</button>
        </form>
        <div class="card mb-4" th:if="${answer != null}">
            <div class="card-header text-success fs-4 fw-bold">
                ğŸ“ ë‹µë³€
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label class="form-label fw-bold">ì œëª©</label>
                    <p class="form-control-plaintext fs-5" th:text="${answer.title}">ë‹µë³€ ì œëª©</p>
                </div>
                <div>
                    <label class="form-label fw-bold">ë‚´ìš©</label>
                    <p class="form-control-plaintext" th:text="${answer.content}">ë‹µë³€ ë‚´ìš©</p>
                </div>
            </div>
        </div>
        <div class="text-end">
        <button type="button" class="btn btn-secondary" onclick="history.back()">ë’¤ë¡œê°€ê¸°</button>
        </div>
    </div>
</div>
<div th:replace="fragments/footer :: footer"></div>
</body>
</html>


<script>
/*    function enableEdit() {
        document.querySelector('#title').removeAttribute('readonly');
        document.querySelector('#content').removeAttribute('readonly');
        document.querySelector('#editControls').classList.remove('d-none');
    }*/

let isEditing = false;

function toggleEdit() {
    const titleInput = document.getElementById("title");
    const contentTextarea = document.getElementById("content");
    const editBtn = document.getElementById("editButton");
    const form = document.getElementById("inquiryForm");

    if (!isEditing) {
        // ìˆ˜ì • ëª¨ë“œ ì§„ì…
        titleInput.removeAttribute("readonly");
        contentTextarea.removeAttribute("readonly");
        titleInput.focus();

        editBtn.classList.remove("btn-outline-warning");
        editBtn.classList.add("btn-success");
        editBtn.innerText = "âœ… ìˆ˜ì • ì™„ë£Œ";

        isEditing = true;
    } else {
        // í¼ ì œì¶œ
        form.submit();
    }

}

</script>