<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>퀴즈 결과</title>
    <style>
        body {
            background-color: #0e0e1a;
            color: white;
            font-family: 'Pretendard', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .result-container {
            display: flex;
            gap: 30px;
            background-color: #1a1a2e;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 0 15px rgba(0,0,0,0.4);
            align-items: center;
        }

        .circle-chart {
            position: relative;
            width: 120px;
            height: 120px;
        }

        .circle-chart svg {
            transform: rotate(-90deg);
        }

        .circle-bg {
            stroke: #2d2f40;
        }

        .circle {
            stroke: #2ce080;
            transition: stroke-dasharray 1s ease;
        }

        .circle-progress {
            stroke: #ff8c42;
            transition: stroke-dasharray 1s ease;
        }

        .circle-chart text {
            fill: white;
            font-size: 18px;
            dominant-baseline: middle;
            text-anchor: middle;
        }

        .circle-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            font-size: 20px;
        }

        .stats-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            padding: 10px 18px;
            border-radius: 16px;
            font-weight: 500;
            min-width: 180px;
        }

        .known { background-color: #014d40; color: #2ce080; }
        .learning { background-color: #3a1f2f; color: #ff6b81; }
        .remaining { background-color: #2d2f40; color: #b0b3c5; }
    </style>
</head>
<body>

<div class="result-container">
    <!-- SVG 원형 그래프 -->
    <div class="circle-chart">
        <svg width="120" height="120">
            <circle class="circle-bg" cx="60" cy="60" r="50" stroke-width="10" fill="none"/>
            <circle class="circle-progress" cx="60" cy="60" r="50" stroke-width="10" fill="none"
                    stroke-dasharray="0 314" stroke-linecap="round"/>
        </svg>
        <div class="circle-center" id="progress-text">0%</div>
    </div>

    <!-- 통계 -->
    <!-- 통계 -->
    <div class="stats-list">
        <div class="status-bar known">
            <span>알고 있음</span><span id="known-count" th:text="${checkdQuiz.checkedQuiz}">3</span>
        </div>
        <div class="status-bar learning">
            <span>학습 중</span><span id="learning-count" th:text="${checkdQuiz.uncheckedQuiz}">2</span>
        </div>
        <div class="status-bar remaining">
            <span>남은 단어</span><span id="remaining-count" th:text="${checkdQuiz.total - (checkdQuiz.checkedQuiz + checkdQuiz.uncheckedQuiz)}">0</span>
        </div>
    </div>

</div>

<script th:inline="javascript">
    // 동적 값 설정
    let {checkedQuiz ,total , uncheckedQuiz} = /*[[${checkdQuiz}]]*/ [] ;

    const percentage = total === 0 ? 0 : Math.round((checkedQuiz / total) * 100);
    const circle = document.querySelector('.circle-progress');
    const text = document.getElementById('progress-text');

    const circumference = 2 * Math.PI * 50; // r = 50

    // 애니메이션 효과
    let progress = 0;
    const animate = setInterval(() => {
        if (progress >= percentage) {
            clearInterval(animate);
        } else {
            progress++;
            const dash = (progress / 100) * circumference;
            circle.setAttribute('stroke-dasharray', `${dash} ${circumference}`);
            text.innerText = `${progress}%`;
        }
    }, 20);
</script>

</body>
</html>
